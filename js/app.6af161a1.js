(function(){"use strict";var t={408:function(t,e,n){var o=n(7764),i=n(4108);function l(t,e,n,o,l,r){const c=(0,i.E1)("HelloWorld");return(0,i.Wz)(),(0,i.Az)(c,{msg:"Welcome to Your Vue.js App"})}var r=n(9096);const c=t=>((0,i.ED)("data-v-4c651a22"),t=t(),(0,i.ii)(),t),s={style:{display:"flex","flex-direction":"column"}},a={id:"container",style:{display:"flex",gap:"10px"}},d={id:"notelist",style:{height:"100%",flex:"1",display:"flex","flex-direction":"column-reverse"}},p=["onClick","id"],y=(0,i.IL)('<div id="notepad" style="height:100%;flex:8;" data-v-4c651a22><div id="note" data-v-4c651a22><div id="note_text" data-v-4c651a22>Do</div></div></div><div id="" style="height:100%;flex:1;" data-v-4c651a22><div id="" data-v-4c651a22></div></div>',2),_={id:"",style:{top:"80vh",width:"100%",position:"absolute","margin-bottom":"0",display:"flex",gap:"10px","justify-content":"center","align-items":"center"}},u={class:"checkbox-container",style:{display:"flex","flex-direction":"column","justify-content":"center","align-items":"center","user-select":"none"}},h={style:{height:"20px"}},f=c((()=>(0,i.QD)("label",{for:"loop_option_btn",style:{height:"20px","line-height":"20px"}},"循环播放",-1))),m={style:{height:"20px"}},g=c((()=>(0,i.QD)("label",{for:"stop_at_random_option_btn",style:{height:"20px","line-height":"20px"}},"在随机音符后暂停",-1)));function x(t,e,n,o,l,c){return(0,i.Wz)(),(0,i.An)("div",s,[(0,i.QD)("div",a,[(0,i.QD)("div",d,[((0,i.Wz)(!0),(0,i.An)(i.ae,null,(0,i.mi)(l.notes,((t,e)=>((0,i.Wz)(),(0,i.An)("div",{key:e,style:{height:"12.5%",display:"flex","align-items":"center","justify-content":"center"}},[(0,i.QD)("span",{onClick:t=>l.play_effect(e),class:"left-notes",id:"leftnote"+e,style:(0,r.MN)({color:l.colors[e],fontSize:"200%","user-select":"none"})},(0,r.WA)(t),13,p)])))),128))]),y]),(0,i.QD)("div",_,[(0,i.QD)("button",{class:"niceButton2",id:"start_play_btn",onClick:e[0]||(e[0]=(...t)=>c.start_play&&c.start_play(...t)),style:{"margin-top":"0",height:"50px","align-items":"center","justify-content":"center"}},"播放"),(0,i.QD)("button",{class:"niceButton2",id:"replay_note_btn",onClick:e[1]||(e[1]=(...t)=>c.replay_note&&c.replay_note(...t)),style:{"margin-top":"0",height:"50px"}},"重播音符"),(0,i.QD)("div",null,[(0,i.QD)("div",u,[(0,i.QD)("div",h,[(0,i.QD)("input",{type:"checkbox",id:"loop_option_btn",onClick:e[2]||(e[2]=(...t)=>c.loop_option_clicked&&c.loop_option_clicked(...t)),checked:""}),f]),(0,i.QD)("div",m,[(0,i.QD)("input",{type:"checkbox",id:"stop_at_random_option_btn",onClick:e[3]||(e[3]=(...t)=>c.stop_at_random_option_btn_clicked&&c.stop_at_random_option_btn_clicked(...t))}),g])])])])])}n(3248);var v=n(3752);const b=["Do","Re","Mi","Fa","Sol","La","Si","Do"],k=["C3","D3","E3","F3","G3","A3","B3","C4"],w=["rgb(0,0,0)","rgb(146,0,13)","rgb(248,15,28)","rgb(255,131,33)","rgb(20,188,79)","rgb(0,164,255)","rgb(174,69,179)","rgb(146,208,80)"];let D=[];class E{constructor(){this.current_action_index=0,this.last_random_note_index=0,this.last_note_index=0,this.running=!1}replay_note(){O(this.last_note_index)}init_action_chain(){D=[];const t=document.getElementById("note"),e=document.getElementById("notepad");for(let r=0;r<b.length;r++){let n=e.clientWidth*(r/b.length),o=e.clientHeight*(1-r/b.length)-t.clientHeight;D.push({type:"display-note",note_index:r,x:n,y:o,style:{color:w[r]}}),D.push({type:"sleep",time:300})}let n=(e.clientWidth-t.clientWidth)/2,o=(e.clientHeight-t.clientHeight)/2;const i=document.getElementById("note_text");let l=i.style.fontSize;D=D.concat([{type:"set-notetext-style",style:{fontSize:"300%"}},{type:"display-note",note_index:0,x:n,y:o,style:{color:w[0]}},{type:"sleep",time:1e3},{type:"set-notepad-background-color",color:"black"},{type:"sleep",time:300},{type:"set-notepad-background-color",color:"white"},{type:"display-note",note_index:0,x:n,y:o,style:{color:w[0]}},{type:"sleep",time:1e3},{type:"set-notepad-background-color",color:"black"},{type:"display-random-note",note_index:0,x:n,y:o,style:{color:"white"}},{type:"sleep",time:2e3},{type:"set-notepad-background-color",color:"white"},{type:"redisplay-random-note",x:n,y:o},{type:"sleep",time:2e3},{type:"set-notetext-style",style:{fontSize:l}}])}async do_action(t){if("sleep"==t.type)await A(t.time);else if("display-note"==t.type){let e=t.x,n=t.y;O(t.note_index),L(b[t.note_index]),T(e,n),C(t.style),this.last_note_index=t.note_index}else if("display-random-note"==t.type){let e=t.x,n=t.y;this.last_random_note_index=Math.floor(Math.random()*b.length),O(this.last_random_note_index),L("?"),T(e,n),C(t.style),this.last_note_index=this.last_random_note_index}else if("redisplay-random-note"==t.type){let e=t.x,n=t.y;O(this.last_random_note_index),L(b[this.last_random_note_index]),T(e,n),C({color:w[this.last_random_note_index]})}else"set-notepad-background-color"==t.type?S(t.color):"set-notetext-style"==t.type&&C(t.style)}async step(){await this.do_action(D[this.current_action_index])}stop(){B=!1}jump_to_next_non_sleep_action(){let t=this.current_action_index;for(;t<D.length;t++)if("sleep"!=D[t].type)break;this.current_action_index=t}async run(){this.running=!0;let t=0;while(t<100){if(!B){this.jump_to_next_non_sleep_action();break}if(t++,await this.step(),this.current_action_index++,z&&"display-random-note"==D[this.current_action_index-1].type){const t=document.getElementById("start_play_btn");t.click(),this.jump_to_next_non_sleep_action();break}if(this.current_action_index==D.length&&(this.current_action_index=0,!j)){const t=document.getElementById("start_play_btn");t.click();break}100==t&&(t=0)}this.running=!1}}let H=new E,B=!1,j=!0,z=!1;var I={name:"HelloWorld",props:{msg:String},data(){return{notes:b,colors:w,play_effect:O}},mounted(){const t=document.getElementById("note"),e=document.getElementById("leftnote1");t.style.fontSize=150*e.style.fontSize+"%",t.style.fontSize="300%",t.style.height=`${e.parentElement.clientHeight}px`,t.style.width=`${e.parentElement.clientWidth}px`,H.init_action_chain()},methods:{loop_option_clicked(){j=!j},stop_at_random_option_btn_clicked(){z=!z},replay_note(){H.replay_note()},async start_play(){console.log(B);const t=document.getElementById("start_play_btn");B?(B=!1,t.innerHTML="播放▶️",t.innerHTML="<div>►</div>",t.innerHTML="►",H.stop(),console.log("播放")):(B=!0,t.innerHTML="暂停⏸️",t.innerHTML="<div>❚❚</div>",t.innerHTML="❚❚",H.running||await H.run(),console.log("暂停"))}}};let Q=[];for(let V=0;V<b.length;V++){var W="min/"+k[V]+".mp3",M=new v.Howl({src:[W],volume:1});Q.push(M)}function O(t){Q[t].play()}function T(t,e){const n=document.getElementById("note");n.style.marginLeft=`${t}px`,n.style.marginTop=`${e}px`}function C(t){const e=document.getElementById("note_text");for(let n in t)e.style[n]=t[n]}function L(t){const e=document.getElementById("note_text");e.innerHTML=t}function S(t){const e=document.getElementById("notepad");e.style.background=t}function A(t){return new Promise((e=>setTimeout(e,t)))}var $=n(4100);const F=(0,$.c)(I,[["render",x],["__scopeId","data-v-4c651a22"]]);var P=F,G={name:"App",components:{HelloWorld:P}};const N=(0,$.c)(G,[["render",l]]);var R=N;(0,o.W0)(R).mount("#app")}},e={};function n(o){var i=e[o];if(void 0!==i)return i.exports;var l=e[o]={exports:{}};return t[o].call(l.exports,l,l.exports,n),l.exports}n.m=t,function(){var t=[];n.O=function(e,o,i,l){if(!o){var r=1/0;for(d=0;d<t.length;d++){o=t[d][0],i=t[d][1],l=t[d][2];for(var c=!0,s=0;s<o.length;s++)(!1&l||r>=l)&&Object.keys(n.O).every((function(t){return n.O[t](o[s])}))?o.splice(s--,1):(c=!1,l<r&&(r=l));if(c){t.splice(d--,1);var a=i();void 0!==a&&(e=a)}}return e}l=l||0;for(var d=t.length;d>0&&t[d-1][2]>l;d--)t[d]=t[d-1];t[d]=[o,i,l]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={524:0};n.O.j=function(e){return 0===t[e]};var e=function(e,o){var i,l,r=o[0],c=o[1],s=o[2],a=0;if(r.some((function(e){return 0!==t[e]}))){for(i in c)n.o(c,i)&&(n.m[i]=c[i]);if(s)var d=s(n)}for(e&&e(o);a<r.length;a++)l=r[a],n.o(t,l)&&t[l]&&t[l][0](),t[l]=0;return n.O(d)},o=self["webpackChunkyinzhunlianxi"]=self["webpackChunkyinzhunlianxi"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=n.O(void 0,[999],(function(){return n(408)}));o=n.O(o)})();
//# sourceMappingURL=app.6af161a1.js.map